.PHONY : clean data

output/train.txt : train.py data/ml-1m.db
	python $< data/ml-1m.db

# Download the stable 1m dataset from the MovieLens website.

data : data/ml-1m/README

data/ml-1m.zip :
	@echo "â¬‡ï¸ Downloading MovieLens 1m dataset ..."
	mkdir -p data/
	curl -L -o $@ https://files.grouplens.org/datasets/movielens/ml-1m.zip
	@echo "âœ… Downloaded MovieLens 1m dataset."

data/ml-1m/README : data/ml-1m.zip
	@echo "ðŸ“¦ Extracting MovieLens 1m dataset ..."
	unzip -o -d data $<
	# Touch the output to update the timestamp.
	touch $@
	@echo "âœ… Extracted MovieLens 1m dataset."

data/ml-1m.db : build_database.py data/ml-1m/README
	@echo "ðŸ› ï¸ Building MovieLens 1m SQLite database ..."
	python $< data/ml-1m/ $@
	@echo "âœ… Built MovieLens 1m SQLite database."

# Other targets.

clean :
	rm -rf data/
